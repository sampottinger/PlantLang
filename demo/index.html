<html lang="en">
  <head>
    <title>Plant: A Toy Language for Drawing Plants</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/base.css">
  </head>
  <body>
    <div id="skipLinks">
      <a href="#editorArea">Skip to editor</a> / <a href="#languageReference">Skip to language reference</a>
    </div>

    <header>
      <div class="top">
        <div class="section"><h1>Plant</h1></div>
        <div role="navigation" class="section links">Home / <a href="/#languageReference">Docs</a> / <a href="/about.html">About</a> / <a href="/terms.html">Privacy and Terms</a> / <a href="https://github.com/sampottinger/PlantLang">Code</a></div>
      </div>

      <div class="description">
        <span class="summary">Plant is a toy language for "branching" drawing. <a href="/?code=skip100|color%23333333|width5abs|stem20|branch>rotate-45deg|stem15%3B>stem70|rotate-95deg|frac4>width0.7rel|rotateiter47deg|speed3start1|rotatesin15deg|stem20|rotate-50deg|frac3>width0.6rel|rotateiter30deg|stem10|rotate-22.5deg|frac3>rotateiter15deg|width0.3rel|stem5|color%23C5C5C5trans0.3|flower8|frac3>rotateiter20deg|color%23C0C0C0trans0.2|speed3|rotatesin40deg|stem11|flower3%3B%3B%3B%3B%3B%3B&name=example&author=sampottinger&license=MIT" id="example">See example</a> or <a href="#languageReference">how to write Plant code</a>.</span> It is especially useful for drawing plants. It demonstrates <a href="/about.html#why">why one might want to create a domain specific language</a> and <a href="/about.html#how">how to make new languages</a> using <a href="/about.html#oss">common tools</a>. <a href="/terms.html#license">Open source</a> and <a href="/terms.html#summary">privacy respecting</a>. Write and share your Plant programs below.
      </div>
    </header>

    <div class="body" id="editorArea">
      <div class="section">
        <div id="editor" aria-label="Code editor. Hit escape to remove focus."></div>
        <div class="controls">
          <a href="#" id="minify">minify</a> / <a href="#" id="beautify">beautify</a> / <a href="#" id="share">share</a>
        </div>
      </div>

      <div class="section" id="resultsDisplay">
        <div id="authorInfoDisplay">
          <span id="currentAuthorInfo"><span id="nameDisplay">Untitled</span> by <span id="authorDisplay">unknown</span> under <a id="licenseLink" target="_blank" href="/no_license.txt"><span id="licenseDisplay">Proprietary</span></a> license.</span>
          // <a id="editMetadataLink" href="#authorInfoEditor">edit metadata</a>
        </div>
        <div id="authorInfoEditor">
          <div class="field">
            <div><label for="name">Name:</label></div>
            <div><input type="text" id="nameInput" name="name" value="Untitled"></div>
          </div>
          <div class="field">
            <div><label for="author">Author:</label></div>
            <div><input type="text" id="authorInput" name="author" value="unknown"></div>
          </div>
          <div class="field">
            <div><label for="license">License:</label></div>
            <div>
              <select name="license" id="licenseInput">
                <option value="Proprietary" selected>Proprietary</option>
                <option value="CC0">CC0</option>
                <option value="CC BY 4.0">CC BY 4.0</option>
                <option value="CC BY-SA 4.0">CC BY-SA 4.0</option>
                <option value="MIT">MIT</option>
                <option value="BSD 2-Clause">BSD 2-Clause</option>
                <option value="BSD 3-Clause">BSD 3-Clause</option>
                <option value="Apache v2">Apache v2</option>
                <option value="GNU GPL v3">GNU GPL v3</option>
              </select>
            </div>
          </div>
          <div class="field">
            <a href="#authorInfoDisplay" id="finishMetadataLink">Finish</a>
          </div>
        </div>
        <div class="canvas-holder">
          <canvas id="canvas" width="500" height="500"></canvas>
        </div>
        <div id="statusDisplay">
          Ready!
        </div>
      </div>
    </div>
  </body>

  <footer id="languageReference">
    <h3>How to write Plant:</h3>

    <div class="language-details">
      <details>
       <summary>intro</summary>
       <div class="expansion">For a quick example, consider <a href="/?author=sampottinger&name=example&license=CC0&code=skip100|stem100|rotate45deg|skip20|stem20%3B" class="ref-example">skip 100 | stem 100 | rotate 45 deg | skip 20 | stem 20;</a>. In this example program, Plant

         <ul>
           <li>skips (moves without drawing) forward 100 pixels</li>
           <li>draws for 100 pixels</li>
           <li>rotates 45 degrees</li>
           <li>skips forward 20 pixels</li>
           <li>draws for 20 pixels</li>
        </ul>

        Note that examples like the <a href="/?author=sampottinger&name=example&license=CC0&code=skip100|stem100|rotate45deg|skip20|stem20%3B" class="ref-example">introductory code<a> above are links which, when clicked on, are formatted for easier reading and run. Click the link and play around with the code to learn more. With that introduction out of the way, the rest of the sections in this language reference include editable examples to demonstrate different language features. After warming up with some simple commands, be sure to check out <a href="#branch">branch</a>, <a href="#choose">choose</a>, and <a href="#frac">frac</a> which are the heart of what makes Plant special. Finally, you will note that clicking on the links causes the code to get "expanded" out with spaces and newlines. For Plant, spaces and newlines are just for easier reading and do not change the behavior of Plant programs.</div>
      </details>

      <details>
       <summary>stem</summary>
       <div class="expansion">Command which moves forward from the current position, drawing using the current color and width at the current angle. Requires a distance. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem100%3B" class="ref-example">stem 100;</a> draws forward 100 pixels. The number provided can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details>
       <summary>skip</summary>
       <div class="expansion">Command which moves forward from the current position at the current angle without drawing. Requires a distance. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem100|skip100|stem50%3B" class="ref-example">stem 100 | skip 100 | stem 50;</a> draws forward 100 pixels, skips 100 pixels, and draws 50 pixels. The number provided can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details>
       <summary>width</summary>
       <div class="expansion">Command which changes the width with which the stem is drawn. Requires a width either with "abs" or "rel" for absolute pixels or relative multiplier. Example <a href="/?author=sampottinger&name=example&license=CC0&code=width10abs|stem50|width0.5rel|stem40%3B" class="ref-example">width 10 abs | stem 50 | width 0.5 rel | stem 40;</a> draws 50 pixels at width 10 and 40 pixels at width 5. The number provided can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details>
       <summary>rotate</summary>
       <div class="expansion">Command which changes the rotation used for future commands. Requires an amount followed by "deg" or "pi" for degress or radians (expressed as multiple of pi). Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem50|rotate0.5pi|stem40%3B" class="ref-example">stem 50 | rotate 0.5 pi | stem 40;</a> draws a right angle. The number provided can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details>
       <summary>color</summary>
       <div class="expansion">Command which changes the color used for future commands. Requires a hex code followed by an optional transparency value from 0 (transparent) to 1 (opaque). Example <a href="/?author=sampottinger&name=example&license=CC0&code=color%23505050|stem50|color%23505050trans0.7|stem40%3B" class="ref-example">color #505050 | stem 50 | color #505050 trans 0.7 | stem 40;</a> draws two grey segments with the second at 70% opacity. The number for transparency can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details>
       <summary>flower</summary>
       <div class="expansion">Command which draws a circle at the current position using the current color. Requires a radius. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem50|flower10%3B" class="ref-example">stem 50 | flower 10;</a> draws a circle with radius 10 pixels at the end of a rectangle of length 50 pixels. The number for radius can use number modifiers as described in the <a href="#number">number section</a> (don't worry, we will get to it later).</div>
      </details>

      <details id="branch">
       <summary>branch</summary>
       <div class="expansion">Creates one or more "branches" each with their own code where changes made within a branch to position, color, width, speed, and rotation only apply within that branch and its sub-branches. Each branch starts with a forward cheveron (">") and ends with a semicolon (";"). This <a href="/?code=color%2300A0A0|stem100|branch>color%230000A0trans0.5|rotate-40deg|stem30%3B>rotate10deg|stem50|branch>rotate-50deg|stem20%3B>rotate50deg|stem20%3B%3B%3B&name=example&author=sampottinger&license=CC0" class="ref-example">branch example</a> draws two branches of different colors and angles with one branch having another sub-branch.</div>
      </details>

      <details id="choose">
       <summary>choose</summary>
       <div class="expansion">Chooses from a number of branches each with their own code where changes made within a branch to position, color, width, speed, and rotation only apply within that branch and its sub-branches. Each branch starts with a forward cheveron (">") and ends with a semicolon (";"). Unlike branch, choose requires an integer number of branches to choose (like choose 5). By default, it chooses without replacement (each branch can only be chosen once) but adding "replace" (choose 5 replace) enables choice with replacement. This <a href="/?code=color%2300A0A0|stem100|choose2>color%230000A0trans0.5|rotate-40deg|stem30%3B>rotate10deg|stem50|choose2replace>rotate-50deg|stem20%3B>rotate50deg|stem20%3B>stem20%3B%3B>color%230000A0trans0.5|rotate40deg|stem30%3B%3B&name=Untitled&author=unknown&license=Proprietary" class="ref-example">choose example</a> shows how to use choose with and without replacement. If the number to choose exceeds the number of branches and replacement is not enabled, each will be choosen in random order up to the ceiling of the number to choose / num branches.</div>
      </details>

      <details id="frac">
       <summary>frac</summary>
       <div class="expansion">Creates "branches" each with the same code where changes made within a branch to position, color, width, speed, and rotation only apply within that branch and its sub-branches. The branch starts with a forward cheveron (">") and ends with a semicolon (";"). This <a href="/?code=color%2300C000|stem50|width0.5rel|stem10|rotate-70deg|color%23C0C0C0|frac10>width0.5rel|rotateiter9deg|stem10|stemiter8|color%230000C0transiter0.1|flower10%3B%3B&name=example&author=sampottinger&license=CC0" class="ref-example">frac example</a> draws a frac with 10 branches. Note that "iter" refers to the index of the branch as described in the <a href="#id">number: static modifiers section</a>.</div>
      </details>

      <div id="number">
        <details>
          <summary>number: static modifiers</summary>
          <div class="expansion">Numbers have a number of modifiers which can be used which are the same on each frame of the program. Modifiers can be stacked so one can have "rotate iter rand 10 deg" for example.
            <ul>
              <li>The iter modifier will cause the value to be multiplied by the branch index. Note that branch indicies start at 0. This <a href="/?code=color%2300C000|stem100|rotate-80deg|frac5>width0.8rel|color%2300C000trans0.5|rotateiter35deg|stem50|rotate-60deg|frac10>width0.4rel|color%230000C0trans0.3|rotateiter20deg|stemiter5%3B%3B%3B&name=example&author=sampottinger&license=CC0" class="reference-example">iter example</a> demonstrates iter with frac. Multiple iter will multiply the index multiple times. One may traverse upwards by prepending a period so ".iter" gets the parent's branch index and "..iter" gets the grandparent. For example, <a href="/?author=sampottinger&name=example&license=CC0&code=stem100|frac5>rotateiter-20deg|width0.5rel|stem100|frac5>rotateiter-20deg|width0.5rel|stem.iter10%3B%3B%3B">this parent iter example</a> has stems which use their parent's index.</li>
              <li>The remain modifier will cause the value to be multiplied by the number of branches remaining after the current branch. This is the same as iter but it counts backwards to zero. This <a href="/?code=color%2300C000|stem100|rotate-80deg|frac5>width0.8rel|color%2300C000trans0.5|rotateremain35deg|stem50|rotate-60deg|frac10>width0.4rel|color%230000C0trans0.3|rotateiter20deg|stemremain5%3B%3B%3B&name=example&author=sampottinger&license=CC0" class="reference-example">remain example</a> demonstrates remain with frac. One may traverse upwards by prepending a period so ".remain" gets the parent's branch remain and "..remain" gets the grandparent.</li>
              <li>The rand modifier randomly chooses between 0 and 1 before multiplying to the number given. This <a href="/?author=sampottinger&name=example&license=CC0&code=stem200|branch>rotate-40deg|stemrand100%3B>rotate40deg|stemrand100%3B%3B">rand example</a> creates two branches of random length. Specifying rand multiple times will cause multiple random numbers to be generated and multiplied.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>number: dynamic modifiers</summary>
          <div class="expansion">Numbers have a number of modifiers which can be used which can change on each frame of the program. Modifiers can be stacked so one can have "rotate sin dur 10 deg" for example.
            <ul>
              <li>The mouseX and mouseY modifiers multiply by the current x and y position of the mouse respectively. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem200|rotatemouseX1deg|stem100%3B">stem 200 | rotate mouseX 1 deg | stem 100;</a> which rotates a stem based on mouse horizontal position. Specifying mouseX or mouseY multiple times will cause them to be multiplied multiple times.</li>
              <li>The dur modifier multiplies by the duration since the program started. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem200|rotatedur100deg|stem100%3B">stem 200 | rotate dur 100 deg | stem 100;</a> shows a rotating stem. Specifying dur multiple times causes it to be multiplied multiple times. Duration is modifable by <a href="#speed">speed</a>.</li>
              <li>The sin modifier multiplies by the sin of duration since the program started divided by PI. Example <a href="/?author=sampottinger&name=example&license=CC0&code=stem200|rotatesin100deg|stem100%3B">stem 200 | rotate sin 100 deg | stem 100;</a> shows a rotating stem. Specifying sin multiple times causes it to be multiplied multiple times.</li>
            </ul>
          </div>
        </details>
        <details>
          <summary>number: date modifiers</summary>
          <div class="expansion">Numbers have a number of modifiers which can be used which can change based on date of frame render. Example <a href="/?code=color%23505050|stem200|color%23505050trans0.5|rotatemin6deg|stem30|rotatesec6deg|stem30%3B&name=example&author=sampottinger&license=CC0">date demo</a>. Modifiers can be stacked so one can have "rotate sec millis 10 deg" for example.
            <ul>
              <li>The millis modifier multiplies by the current milliseconds of the second (0 indexed). Specifying sec multiple times causes it to be multiplied multiple times.</li>
              <li>The sec modifier multiplies by the current second of the minute (0 indexed). Specifying sec multiple times causes it to be multiplied multiple times.</li>
              <li>The min modifier multiplies by the current minute of the hour (0 indexed). Specifying min multiple times causes it to be multiplied multiple times.</li>
              <li>The hour modifier multiplies by the current hour of the day (0 indexed). Specifying hour multiple times causes it to be multiplied multiple times.</li>
              <li>The day modifier multiplies by the current day of month (0 indexed). Specifying day multiple times causes it to be multiplied multiple times.</li>
              <li>The month modifier multiplies by the current month of year (0 indexed). Specifying month multiple times causes it to be multiplied multiple times.</li>
              <li>The year modifier multiplies by the current year (like 2022). Specifying year multiple times causes it to be multiplied multiple times.</li>
            </ul>
          </div>
        </details>
        <details>
          <summary>expressions</summary>
          <div class="expansion">Numbers can be added (+), subtracted (-), multiplied (*), and raised to a power (^). One may also use parantheses to change order of operations. See this offset example: <a href="/?code=skip100|color%23C0C0C0|stem50|color%23C0C0C0trans0.5|flower20%2Bsin10%3B&name=example&author=sampottinger&license=MIT">skip100|color#C0C0C0|stem50|color#C0C0C0trans0.5|flower20+sin10;</a>.</div>
        </details>
      </div>
    </div>
  </footer>

  <script type="text/javascript" src="./js/ace.min.js"></script>

  <script type="text/javascript" src="./js/plant_lang.js?v=20220105"></script>
  <script type="text/javascript" src="./js/shared.js?v=20220105"></script>
  <script type="text/javascript" src="./js/const.js?v=20220105"></script>
  <script type="text/javascript" src="./js/struct.js?v=20220105"></script>
  <script type="text/javascript" src="./js/util.js?v=20220105"></script>
  <script type="text/javascript" src="./js/visitors.js?v=20220105"></script>
  <script type="text/javascript" src="./js/plant_drawer.js?v=20220105"></script>
</html>
